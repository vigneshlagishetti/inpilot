# Architecture & Flow Diagrams

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Sign In Page   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Dashboard Page  â”‚             â”‚
â”‚  â”‚   (Clerk UI)     â”‚         â”‚  (Main App)      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                         â”‚                        â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                     â”‚                   â”‚                   â”‚   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚   Voice     â”‚    â”‚   Answer    â”‚    â”‚   History   â”‚
â”‚              â”‚  Recorder   â”‚    â”‚   Display   â”‚    â”‚    Panel    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                     â”‚                   â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                   â”‚
                      â”‚ Speech API        â”‚ Answer Data
                      â–¼                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
         â”‚  Web Speech API    â”‚           â”‚
         â”‚  (Browser Native)  â”‚           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                      â”‚                   â”‚
                      â”‚ Transcribed Text  â”‚
                      â–¼                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEXT.JS SERVER       â”‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚          API Route: /api/generate-answer            â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚         â”‚
â”‚  â”‚  â”‚  1. Receive question text                  â”‚     â”‚         â”‚
â”‚  â”‚  â”‚  2. Verify user authentication (Clerk)     â”‚     â”‚         â”‚
â”‚  â”‚  â”‚  3. Call AI Service                        â”‚     â”‚         â”‚
â”‚  â”‚  â”‚  4. Parse and structure response           â”‚     â”‚         â”‚
â”‚  â”‚  â”‚  5. Return JSON answer                     â”‚     â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                          â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Clerk     â”‚    â”‚  Supabase   â”‚    â”‚   OpenAI    â”‚         â”‚
â”‚  â”‚   (Auth)    â”‚    â”‚ (Database)  â”‚    â”‚  (GPT-4)    â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚ â€¢ Sessions  â”‚    â”‚ â€¢ Sessions  â”‚    â”‚ â€¢ Generate  â”‚         â”‚
â”‚  â”‚ â€¢ Users     â”‚    â”‚ â€¢ Questions â”‚    â”‚   Answers   â”‚         â”‚
â”‚  â”‚ â€¢ Tokens    â”‚    â”‚ â€¢ Answers   â”‚    â”‚ â€¢ Parse     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: From Voice to Answer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER   â”‚
â”‚ SPEAKS  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ "What is React?"
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web Speech API     â”‚
â”‚  (Browser)          â”‚
â”‚                     â”‚
â”‚  â€¢ Captures audio   â”‚
â”‚  â€¢ Converts to text â”‚
â”‚  â€¢ Real-time        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Transcribed: "What is React?"
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VoiceRecorder      â”‚
â”‚  Component          â”‚
â”‚                     â”‚
â”‚  â€¢ Detects silence  â”‚
â”‚  â€¢ Stops recording  â”‚
â”‚  â€¢ Triggers callbackâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ onTranscriptionComplete("What is React?")
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard          â”‚
â”‚  Component          â”‚
â”‚                     â”‚
â”‚  â€¢ Shows loading    â”‚
â”‚  â€¢ Calls API        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ POST /api/generate-answer
           â”‚ { question: "What is React?" }
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Route Handler          â”‚
â”‚  /api/generate-answer       â”‚
â”‚                             â”‚
â”‚  1. âœ“ Check authentication  â”‚
â”‚  2. âœ“ Validate input        â”‚
â”‚  3. â†’ Call AI service       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ generateAnswer("What is React?")
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Service                 â”‚
â”‚  (lib/ai-service.ts)        â”‚
â”‚                             â”‚
â”‚  1. Build structured prompt â”‚
â”‚  2. Call OpenAI API         â”‚
â”‚  3. Parse response          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Request to OpenAI
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OpenAI GPT-4               â”‚
â”‚                             â”‚
â”‚  Generates:                 â”‚
â”‚  â€¢ Direct answer            â”‚
â”‚  â€¢ Detailed explanation     â”‚
â”‚  â€¢ Example                  â”‚
â”‚  â€¢ Code (if applicable)     â”‚
â”‚  â€¢ Complexity analysis      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Structured response text
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Response Parser            â”‚
â”‚  (extractSection)           â”‚
â”‚                             â”‚
â”‚  Extracts:                  â”‚
â”‚  ---DIRECT_ANSWER---        â”‚
â”‚  ---DETAILED_EXPLANATION--- â”‚
â”‚  ---EXAMPLE---              â”‚
â”‚  ---BRUTE_FORCE---          â”‚
â”‚  ---OPTIMAL_APPROACH---     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ JSON Object
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  {                          â”‚
â”‚    directAnswer: "...",     â”‚
â”‚    detailedExplanation,     â”‚
â”‚    example: "...",          â”‚
â”‚    bruteForceApproach,      â”‚
â”‚    optimalApproach,         â”‚
â”‚    timeComplexity,          â”‚
â”‚    spaceComplexity          â”‚
â”‚  }                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Return to Dashboard
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard receives answer  â”‚
â”‚                             â”‚
â”‚  â€¢ Hide loading             â”‚
â”‚  â€¢ Set answer state         â”‚
â”‚  â€¢ Add to history           â”‚
â”‚  â€¢ Show toast               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Pass to AnswerDisplay
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AnswerDisplay Component    â”‚
â”‚                             â”‚
â”‚  Renders with animation:    â”‚
â”‚  âœ“ Direct Answer (Green)    â”‚
â”‚  âœ“ Detailed Explanation     â”‚
â”‚  âœ“ Example (Purple)         â”‚
â”‚  âœ“ Brute Force (Orange)     â”‚
â”‚  âœ“ Optimal Solution (Green) â”‚
â”‚  âœ“ Complexity Analysis      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER SEES ANSWER           â”‚
â”‚  (Beautifully formatted!)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App (layout.tsx)
â”‚
â”œâ”€ ClerkProvider
â”‚  â”‚
â”‚  â”œâ”€ Sign In Page (/sign-in)
â”‚  â”‚  â””â”€ Clerk <SignIn /> component
â”‚  â”‚
â”‚  â”œâ”€ Sign Up Page (/sign-up)
â”‚  â”‚  â””â”€ Clerk <SignUp /> component
â”‚  â”‚
â”‚  â””â”€ Dashboard (/dashboard)
â”‚     â”‚
â”‚     â”œâ”€ Header
â”‚     â”‚  â”œâ”€ Title
â”‚     â”‚  â””â”€ <UserButton />
â”‚     â”‚
â”‚     â””â”€ Main Content (Grid)
â”‚        â”‚
â”‚        â”œâ”€ Left Column
â”‚        â”‚  â”‚
â”‚        â”‚  â”œâ”€ Ask Question Card
â”‚        â”‚  â”‚  â””â”€ <VoiceRecorder />
â”‚        â”‚  â”‚     â”œâ”€ Microphone Button
â”‚        â”‚  â”‚     â”œâ”€ Recording Indicator
â”‚        â”‚  â”‚     â”œâ”€ Status Text
â”‚        â”‚  â”‚     â””â”€ Transcript Display
â”‚        â”‚  â”‚
â”‚        â”‚  â””â”€ History Card
â”‚        â”‚     â””â”€ Recent Questions List
â”‚        â”‚
â”‚        â””â”€ Right Column
â”‚           â”‚
â”‚           â”œâ”€ Loading State
â”‚           â”‚  â””â”€ Spinner + Text
â”‚           â”‚
â”‚           â”œâ”€ Empty State
â”‚           â”‚  â””â”€ Welcome Message
â”‚           â”‚
â”‚           â””â”€ Answer Display
â”‚              â””â”€ <AnswerDisplay />
â”‚                 â”œâ”€ Question Header
â”‚                 â”œâ”€ Direct Answer Card
â”‚                 â”œâ”€ Detailed Explanation Card
â”‚                 â”œâ”€ Example Card
â”‚                 â””â”€ Code Solutions
â”‚                    â”œâ”€ Brute Force Card
â”‚                    â”œâ”€ Optimal Approach Card
â”‚                    â””â”€ Complexity Analysis
â”‚
â””â”€ <Toaster /> (Notifications)
```

## Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User      â”‚
â”‚   Visits    â”‚
â”‚   Site      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  middleware.ts      â”‚
â”‚  Checks auth status â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ Not Authenticated â”€â”€â”€â”
       â”‚                         â”‚
       â”‚                         â–¼
       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚  Redirect to        â”‚
       â”‚              â”‚  /sign-in           â”‚
       â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â”‚                     â–¼
       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚  Clerk Sign In Page â”‚
       â”‚              â”‚  User enters creds  â”‚
       â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â”‚                     â”‚ Success
       â”‚                     â”‚
       â””â”€â”€â”€ Authenticated â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚        â”‚
                             â–¼        â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Redirect to /dashboard â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Session Stored in      â”‚
                  â”‚  Cookies (httpOnly)     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  All future requests    â”‚
                  â”‚  include session token  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Users          â”‚
â”‚  (Managed by Clerk) â”‚
â”‚                     â”‚
â”‚  â€¢ user_id (PK)     â”‚
â”‚  â€¢ email            â”‚
â”‚  â€¢ name             â”‚
â”‚  â€¢ created_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ One-to-Many
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ interview_sessions  â”‚
â”‚                     â”‚
â”‚  â€¢ id (PK)          â”‚
â”‚  â€¢ user_id (FK) â”€â”€â”€â”€â”¼â”€â”€â”€â–¶ References Users
â”‚  â€¢ title            â”‚
â”‚  â€¢ created_at       â”‚
â”‚  â€¢ updated_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ One-to-Many
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    questions        â”‚
â”‚                     â”‚
â”‚  â€¢ id (PK)          â”‚
â”‚  â€¢ session_id (FK) â”€â”¼â”€â”€â”€â–¶ References Sessions
â”‚  â€¢ question_text    â”‚
â”‚  â€¢ audio_url        â”‚
â”‚  â€¢ created_at       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ One-to-One
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        answers              â”‚
â”‚                             â”‚
â”‚  â€¢ id (PK)                  â”‚
â”‚  â€¢ question_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–¶ References Questions
â”‚  â€¢ direct_answer            â”‚
â”‚  â€¢ detailed_explanation     â”‚
â”‚  â€¢ example                  â”‚
â”‚  â€¢ brute_force_approach     â”‚
â”‚  â€¢ optimal_approach         â”‚
â”‚  â€¢ time_complexity          â”‚
â”‚  â€¢ space_complexity         â”‚
â”‚  â€¢ created_at               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Request/Response Cycle

```
CLIENT                    SERVER                    EXTERNAL
  â”‚                         â”‚                         â”‚
  â”‚  1. Click Mic           â”‚                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
  â”‚                         â”‚                         â”‚
  â”‚  2. Speech Recognition  â”‚                         â”‚
  â”‚  (Browser Web API)      â”‚                         â”‚
  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
  â”‚                         â”‚                         â”‚
  â”‚  3. POST /api/generate  â”‚                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
  â”‚  {question: "..."}      â”‚                         â”‚
  â”‚                         â”‚                         â”‚
  â”‚                         â”‚  4. Verify Auth         â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                         â”‚     (Clerk)             â”‚
  â”‚                         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                         â”‚     âœ“ Valid             â”‚
  â”‚                         â”‚                         â”‚
  â”‚                         â”‚  5. Generate Answer     â”‚
  â”‚                         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
  â”‚                         â”‚     (OpenAI GPT-4)      â”‚
  â”‚                         â”‚                         â”‚
  â”‚                         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                         â”‚  Structured Response    â”‚
  â”‚                         â”‚                         â”‚
  â”‚  6. Return JSON         â”‚                         â”‚
  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
  â”‚  {directAnswer, ...}    â”‚                         â”‚
  â”‚                         â”‚                         â”‚
  â”‚  7. Render Answer       â”‚                         â”‚
  â”‚  (AnswerDisplay)        â”‚                         â”‚
  â”‚                         â”‚                         â”‚
```

## File Organization

```
ai-chat-app/
â”‚
â”œâ”€â”€ ğŸ“ app/              â† Next.js App Router
â”‚   â”œâ”€â”€ api/             â† API endpoints
â”‚   â”œâ”€â”€ dashboard/       â† Main app page
â”‚   â”œâ”€â”€ sign-in/         â† Auth pages
â”‚   â”œâ”€â”€ sign-up/
â”‚   â””â”€â”€ layout.tsx       â† Root layout
â”‚
â”œâ”€â”€ ğŸ“ components/       â† React components
â”‚   â”œâ”€â”€ ui/              â† Reusable UI
â”‚   â”œâ”€â”€ VoiceRecorder    â† Voice input
â”‚   â””â”€â”€ AnswerDisplay    â† Answer output
â”‚
â”œâ”€â”€ ğŸ“ lib/              â† Utilities & services
â”‚   â”œâ”€â”€ ai-service.ts    â† OpenAI integration
â”‚   â”œâ”€â”€ supabase.ts      â† Database client
â”‚   â””â”€â”€ utils.ts         â† Helper functions
â”‚
â”œâ”€â”€ ğŸ“ supabase/         â† Database
â”‚   â””â”€â”€ schema.sql       â† Table definitions
â”‚
â”œâ”€â”€ ğŸ“„ Configuration
â”‚   â”œâ”€â”€ next.config.js
â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ middleware.ts
â”‚
â””â”€â”€ ğŸ“š Documentation
    â”œâ”€â”€ README.md
    â”œâ”€â”€ SETUP.md
    â”œâ”€â”€ DEPLOYMENT.md
    â”œâ”€â”€ PROJECT_SUMMARY.md
    â””â”€â”€ QUICKSTART.md
```

This architecture provides a robust, scalable foundation for an AI-powered interview assistant! ğŸš€
